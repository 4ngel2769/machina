# Machina Environment Configuration

# Server Configuration
# The hostname/IP where the Next.js server is running
# Use 0.0.0.0 to listen on all interfaces (accessible from other machines)
# Use localhost/127.0.0.1 for local-only access
SERVER_HOST=0.0.0.0
SERVER_PORT=3000

# Public URL Configuration
# This should be the hostname/IP that clients use to reach your server
# Examples:
#   - For local development: localhost or 127.0.0.1
#   - For remote access: your server's IP (e.g., 192.168.1.100)
#   - For production: your domain (e.g., machina.example.com)
PUBLIC_HOST=localhost

# ISO Upload Configuration
# Directory (on the host) where per-user ISO uploads are stored
USER_ISO_UPLOAD_DIR=/var/lib/machina/user-isos
# Maximum ISO upload size in bytes (default 4 GiB)
MAX_USER_ISO_UPLOAD_BYTES=4294967296

# Tenant Network Allocation
# Base third octet for per-user private networks (10.<base>.<x>.0/24)
USER_VNET_BASE_OCTET=200
# Allowed subnet range for tenant allocation (x in 10.x.x.x)
USER_VNET_MIN_SUBNET=10
USER_VNET_MAX_SUBNET=250

# WebSocket/Proxy Configuration
# The host where websockify proxies will listen
# Use 127.0.0.1 to keep proxies local and route them through a trusted tunnel
# Override only if you intentionally expose raw proxy ports
WEBSOCKET_LISTEN_HOST=127.0.0.1

# The base port for websockify proxies (will auto-increment: 6080, 6081, 6082...)
WEBSOCKET_BASE_PORT=6080

# Maximum lifespan (in seconds) for issued VNC session tokens
VNC_SESSION_TTL_SECONDS=3600

# VNC/SPICE Configuration
# The default listen address for VM display servers
# Use 0.0.0.0 to allow remote VNC/SPICE connections
# Use 127.0.0.1 for local-only access
VM_DISPLAY_LISTEN=0.0.0.0

# Libvirt URI override (needed when running Machina inside Docker)
# Example: qemu+unix:///system?socket=/var/run/libvirt/libvirt-sock
# LIBVIRT_DEFAULT_URI=qemu+unix:///system?socket=/var/run/libvirt/libvirt-sock

# Docker Configuration
# Docker socket path (usually /var/run/docker.sock on Linux)
DOCKER_SOCKET_PATH=/var/run/docker.sock
# Optional TCP endpoint override (e.g., when proxying Docker daemon)
# DOCKER_HOST=tcp://docker:2375
# DOCKER_PORT=2375

# UI configuration
# Comma-separated list of container names that should not be stopped/restarted/deleted from the UI
NEXT_PUBLIC_PROTECTED_CONTAINER_NAMES=machina

# Development/Production Mode
NODE_ENV=development

# Database Configuration
# Set to 'true' to use MongoDB (production), 'false' for file-based storage (development)
USE_MONGODB=false

# MongoDB Connection String (production)
MONGODB_URI=mongodb://100.100.1.3:27017/machina_dev?authSource=admin

# Authentication Configuration
# Generate a random secret with: openssl rand -base64 32
# IMPORTANT: Change this in production!
NEXTAUTH_SECRET=change-this-to-a-random-secret-in-production
NEXTAUTH_URL=http://localhost:3000
# Set to true only when you must log in over plain HTTP (e.g., LAN testing)
# Leaving this false forces cookies to be Secure-only (recommended for production)
AUTH_ALLOW_INSECURE_COOKIES=false

# Default Admin User
# These credentials will be used to create the default admin user if no users exist
# Username must be 3-20 characters (letters, numbers, hyphens, underscores)
# Password must be at least 6 characters
DEFAULT_ADMIN_USERNAME=admin
DEFAULT_ADMIN_PASSWORD=admin123

# Logging
LOG_LEVEL=info
